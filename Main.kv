#:kivy 1.0

ScreenManager:
    FrontPage:
    SettingsPage:
    CameraPage:
    ManualPage:

<FrontPage>:
    name: 'front_page'
    FloatLayout:
        #size: root.width - 200, root.height - 200
        #pos: 100, 100 
        orientation: 'vertical'

        Label:
            text: 'Welcome to Block Lens'
            font_size: 50
            pos_hint: {'center_y': 0.7}
            # Will add font style to the title
        RoundedButton:
            text: 'Go to settings page'
            on_press: app.root.current = 'settings_page'
            #shrinks the button and adjust the button based on x axis and y axis
            pos_hint: {'center_x': 0.2, 'center_y': 0.5}
            # Adjust the sizes of the circle
            size_hint: (.3, .2)
            
        RoundedButton:
            text: 'Go to camera page'
            on_press: app.root.current = 'camera_page'
            #shrinks the button
            pos_hint: {'center_x': 0.8, 'center_y': 0.5}
            size_hint: (.3, .2)
        RoundedButton:
            text: 'Go to manual page'
            on_press: app.root.current = 'manual_page'
            #shrinks the button
            pos_hint: {'center_x': 0.5, 'center_y': 0.3}
            size_hint: (.3, .2)

<SettingsPage>:
    name: 'settings_page'
    BoxLayout:
        orientation: 'vertical'
        Label:
            text: 'Welcome to the settings page'
            font_size: 20
        Button:
            text: 'Go to front page'
            on_press: app.root.current = 'front_page'

<CameraPage>:
    name: 'camera_page'
    FloatLayout:
        BoxLayout:
            orientation: 'horizontal'
            size_hint_y: None
            height: '50dp'
            pos_hint: {'bottom': 1}
            #Home button
            Button:
                text: 'Go to front page'
                on_press: app.root.current = 'front_page'
            #gallery button
            Button:
                text: 'Gallery button'
                on_press: root.open_gallery()

#popup to display uploaded images
<ImagePopup>:
    size_hint: None, None
    size: 1000, 600
    FloatLayout:
        Image:
            id: img
            allow_stretch: True
            size_hint: 1, 0.8
            pos_hint: {'x': 0, 'y': 0.2}
        #button to close out of image display
        Button: 
            text: "X"
            size_hint: None, None
            size: 40, 40
            pos_hint: {'right': 0.98, 'top': 0.98}
            on_press: root.dismiss() #close popup
        #button to analyze the photo
        Button: 
            text: "Analyze"
            size_hint: None, None
            size: 100, 50
            pos_hint: {'center_x': 0.5, 'y': 0.05}
        
<ManualPage>:
    name: 'manual_page'
    BoxLayout:
        orientation: 'vertical'
        Label:
            text: 'Welcome to the manual page'
            font_size: 20
        Button:
            text: 'Go to front page'
            on_press: app.root.current = 'front_page'

<RoundedButton@Button>
    background_color: (0,0,0,0)
    background_normal: ''
    canvas.before:
        Color:
        #create the black color
            rgba: (0, 0, 0, 1)
        RoundedRectangle:
            size: self.size
            pos: self.pos
            radius: [500]

#Replaces the regular button with a circular button
#<CircularButton@Button>:
    #size_hint: None, None  # Remove size constraints from layout
 #   size: 100, 100  # Set size (width = height for a perfect circle)
  #  background_normal: ''  # Remove default background image
   # background_color: 0.0, 0.32, 0.64, 1  # Color for 0052A3(blue)
    #canvas.before:
     #   Color:
      #      rgba: 0.2, 0.6, 0.86, 1  # Same color as background_color
       # Ellipse:
        #    pos: self.pos  # Draw at the position of the button
         #   size: self.size  # Match the size of the button